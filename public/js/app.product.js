(function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};!function(){"use strict";var a,c,d,e;return d=window.myapp,d.model={},d.collection={},d.view={main:{},sub:{}},d.util={},a=function(){function a(){}return a}(),c=function(a){function c(){return e=c.__super__.constructor.apply(this,arguments)}return b(c,a),c}(Backbone),d.App=new a,d.Backbone=c}()}).call(this),function(){(function(a){"use strict";var b;return b=function(){function a(){$.ajaxSettings.timeout=5e3,$.ajaxSettings.xhr=function(){var a;return a=new XMLHttpRequest}}return a.prototype.get=function(a,b){return this._ajax("get",a,b)},a.prototype.post=function(a,b){return this._ajax("post",a,b)},a.prototype.put=function(a,b){return this._ajax("put",a,b)},a.prototype["delete"]=function(a,b){return this._ajax("delete",a,b)},a.prototype._ajax=function(a,b,c){var d;return d=new Deferred,$.ajax({url:b,type:a,data:c,dataType:"json",success:function(a){return d.call(a)},error:function(a){return d.fail(a)}}),d},a}(),a.Http=new b}).call(this,myapp.util)}.call(this),function(){(function(a,b){"use strict";return b.User=a.Model.extend({urlRoot:"/api/users/",say:function(){return"I am "+this.get("name")}})}).call(this,myapp.Backbone,myapp.model)}.call(this),function(){(function(a,b,c){"use strict";return c.Users=a.Collection.extend({url:"/api/users/",model:b.User})}).call(this,myapp.Backbone,myapp.model,myapp.collection)}.call(this),function(){(function(a,b,c){"use strict";return b.MyApp=a.View.extend({render:function(a){return this.$el.html(this.tmpl(a))}},{JST:function(a){return c[a]}})}).call(this,myapp.Backbone,myapp.view,myapp.JST)}.call(this),function(){(function(a){"use strict";return a.MainView=a.MyApp.extend({el:$("#mainview")})}).call(this,myapp.view)}.call(this),function(){(function(a){"use strict";return a.SubView=a.MyApp.extend({el:$("#subview")})}).call(this,myapp.view)}.call(this),function(){(function(a,b){"use strict";return b.Default=a.extend({tmpl:a.JST("main/default"),show:function(a){return this.render(a)}})}).call(this,myapp.view.MainView,myapp.view.main)}.call(this),function(){(function(a,b){"use strict";return b.Top=a.extend({tmpl:a.JST("main/top")})}).call(this,myapp.view.MainView,myapp.view.main)}.call(this),function(){(function(a,b){"use strict";return b.Friends=a.extend({tmpl:a.JST("sub/friends"),show:function(a){return this.render({friends:a})}})}).call(this,myapp.view.SubView,myapp.view.sub)}.call(this),function(){(function(a,b){"use strict";return b.My=a.extend({tmpl:a.JST("sub/my"),show:function(a){return this.render(a)}})}).call(this,myapp.view.SubView,myapp.view.sub)}.call(this),function(){(function(a,b){"use strict";return b.Top=a.extend({tmpl:a.JST("sub/top")})}).call(this,myapp.view.SubView,myapp.view.sub)}.call(this),function(){(function(a,b,c,d){"use strict";var e;return e=a.Router.extend({routes:{"":"top","my/":"my","friends/":"friends"},top:function(){return(new c.sub.Top).render(),(new c.main.Top).render()},my:function(){var a;return a=new b.User({id:1}),a.fetch({success:function(){var b;return b=a.toJSON(),(new c.main.Default).show(b),(new c.sub.My).show(b)}})},friends:function(){var a;return a=new d.Users,a.fetch({success:function(){var d;return(new c.sub.Friends).show(a.toJSON()),d=new b.User({id:1}),d.fetch({success:function(){return(new c.main.Default).show(d.toJSON())}})}})}}),myapp.Router=new e,a.history.start()}).call(this,myapp.Backbone,myapp.model,myapp.view,myapp.collection)}.call(this);