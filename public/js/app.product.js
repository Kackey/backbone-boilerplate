(function(){!function(){"use strict";var a;return null==window.myapp&&(window.myapp={}),a=window.myapp,a.model={},a.collection={},a.view={item:{},collection:{},composite:{},layout:{}},a.util={}}()}).call(this),function(){(function(){"use strict";return this.util.cachedSync=function(a,b,c){var d,e;return"read"===a&&null!=b.storage&&(d=b.storage.get(),null!=d)?(e=new $.Deferred,b.set(d),e.resolve(),e.promise()):Backbone.sync(a,b,c)}}).call(myapp)}.call(this),function(){(function(){"use strict";var a;return a=function(){function a(a){this.type=a,this.storage="local"===this.type?localStorage:sessionStorage}return a.prototype.get=function(a){return this.storage.getItem(a)},a.prototype.set=function(a,b){return this.storage.setItem(a,b)},a.prototype.remove=function(a){return this.storage.removeItem(a)},a.prototype.clear=function(){return this.storage.clear()},a}(),this.util.sessionStorage=new a("session"),this.util.localStorage=new a("local")}).call(myapp)}.call(this),function(){(function(){"use strict";var a;return a=function(){function a(){var a,b,c,d,e,f,g;f=this.helper;for(b in f)a=f[b],Handlebars.registerHelper(b,a);for(g=this.particles,d=0,e=g.length;e>d;d++)c=g[d],Handlebars.registerPartial(c,JST["particle/"+c])}return a.prototype.helper={upperCase:function(a){return a.toUpperCase()}},a.prototype.particles=["user"],a}(),this.Template=a}).call(myapp)}.call(this),function(){(function(){"use strict";var a,b,c;return c=this.view,b=this.model,a=this.collection,this.Controller={top:function(){var a;return a=new c.layout.Top,myapp.App.content.show(a)},error:function(){var a;return a=new c.layout.Error,myapp.App.content.show(a)},my:function(){var a;return a=new b.User({id:1}),a.fetch().done(function(){var b;return b=new c.layout.My({model:a}),myapp.App.content.show(b)})},friends:function(){return(new c.layout.Friends).show()}}}).call(myapp)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};(function(){"use strict";var a;return this.Router=function(c){function d(){return a=d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.controller=myapp.Controller,d.prototype.appRoutes={"":"top","error/":"error","my/":"my","friends/":"friends"},d.prototype.assign=function(a){return Backbone.history.navigate("#"+a,{replace:!1})},d.prototype.replace=function(a){return Backbone.history.navigate("#"+a,{replace:!0})},d}(Backbone.Marionette.AppRouter)}).call(myapp)}.call(this),function(){(function(){"use strict";var a,b,c;return b=this,c=function(){return $.ajaxSettings.timeout=5e3,$.ajaxSettings.cache=!1},a=new Backbone.Marionette.Application,a.addInitializer(function(){return this.router=new b.Router,c()}),a.addRegions({content:"#content"}),b.App=a}).call(myapp)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};(function(){"use strict";var a,c,d,e;return c=this.model,d=this.util,c.Base=function(c){function f(){return e=f.__super__.constructor.apply(this,arguments)}return b(f,c),f.prototype.storage=null,f.prototype.sync=d.cachedSync,f.prototype.initialize=function(b){var c,d,e=this;return null==b&&(b={}),null!=this.storageType?(d=null!=this.idAttribute?this.idAttribute:"id",c=b[d]||"",this.storage=new a("model:"+this.constructor.name+":"+c,this.storageType),this.on("change",function(){return e.storage.set(e.toJSON())}),this.on("destroy",function(){return e.storage.remove()})):void 0},f}(Backbone.Model),a=function(){function a(a,b){switch(this.key=a,b){case"session":this.storage=d.sessionStorage;break;case"local":this.storage=d.localStorage;break;default:throw new Error("storageType is allowed 'session' or 'local'")}}return a.prototype.get=function(){var a;return a=this.storage.get(this.key),null!=a?JSON.parse(a):void 0},a.prototype.set=function(a){return this.storage.set(this.key,JSON.stringify(a))},a.prototype.remove=function(){return this.storage.remove(this.key)},a}()}).call(myapp)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};(function(){"use strict";var a,c;return a=this.model,a.User=function(a){function d(){return c=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.urlRoot="/users/",d.prototype.storageType="session",d.prototype.initialize=function(a){return d.__super__.initialize.apply(this,arguments),this.name=a.name},d}(a.Base)}).call(myapp)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};(function(){"use strict";var a,c,d,e,f;return d=this.model,c=this.collection,e=this.util,c.Base=function(c){function g(){return f=g.__super__.constructor.apply(this,arguments)}return b(g,c),g.prototype.storage=null,g.prototype.sync=e.cachedSync,g.prototype.model=d.Base,g.prototype.initialize=function(){var b,c=this;return null!=this.storageType?(this.storage=new a("collection:"+this.constructor.name,this.model,this.storageType),b=function(){return c.storage.set(c.toJSON())},this.on({add:b,remove:b,reset:b,destroy:function(){return c.storage.remove()}})):void 0},g}(Backbone.Collection),a=function(){function a(a,b,c){switch(this.key=a,this.model=b,c){case"session":this.storage=e.sessionStorage;break;case"local":this.storage=e.localStorage;break;default:throw new Error("storageType is allowed 'session' or 'local'")}}return a.prototype.get=function(){var a,b,c,d,e,f,g,h;if(e=this.storage.get(this.key),null!=e){for(b=[],e=JSON.parse(e),d=this._getModelIdAttribute(),f={},g=0,h=e.length;h>g;g++){if(c=e[g],f[d]=c,a=new this.model(f).storage.get(),null==a)return;b.push(a)}return b}},a.prototype.set=function(a,b){var c,d,e,f,g,h,i;for(f=[],e=this._getModelIdAttribute(),g={},h=0,i=a.length;i>h;h++)c=a[h],d=c[e],f.push(d),g[e]=d,new this.model(g).storage.set(c,b);return this.storage.set(this.key,JSON.stringify(f))},a.prototype.remove=function(){var a,b,c,d,e;for(b=this.storage.get(this.key),this.storage.remove(this.key),e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(new this.model({id:a}).storage.remove());return e},a.prototype._getModelIdAttribute=function(){return null!=this.model.prototype.idAttribute?this.model.prototype.idAttribute:"id"},a}()}).call(myapp)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};(function(){"use strict";var a,c,d;return c=this.model,a=this.collection,a.Users=function(a){function e(){return d=e.__super__.constructor.apply(this,arguments)}return b(e,a),e.prototype.url="/users/",e.prototype.model=c.User,e.prototype.storageType="session",e}(a.Base)}).call(myapp)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};(function(){"use strict";var a,c;return a=this.view,a.item.Friend=function(a){function d(){return c=d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.template=JST["items/friend"],d}(Backbone.Marionette.ItemView)}).call(myapp)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};(function(){"use strict";var a,c;return a=this.view,a.collection.Friends=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}return b(e,d),e.prototype.itemView=a.item.Friend,e}(Backbone.Marionette.CollectionView)}).call(myapp)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};(function(){"use strict";var a;return this.view.layout.Error=function(c){function d(){return a=d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.template=JST["layouts/error"],d}(Backbone.Marionette.Layout)}).call(myapp)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};(function(){"use strict";var a,c,d;return c=this.view,a=this.collection,c.layout.Friends=function(e){function f(){return d=f.__super__.constructor.apply(this,arguments)}return b(f,e),f.prototype.template=JST["layouts/friends"],f.prototype.regions={friends:"#friends"},f.prototype.show=function(){var b,d=this;return b=new a.Users,b.fetch().done(function(){return myapp.App.content.show(d),d.friends.show(new c.collection.Friends({collection:b}))})},f}(Backbone.Marionette.Layout)}).call(myapp)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};(function(){"use strict";var a;return this.view.layout.My=function(c){function d(){return a=d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.template=JST["layouts/my"],d}(Backbone.Marionette.Layout)}).call(myapp)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};(function(){"use strict";var a;return this.view.layout.Top=function(c){function d(){return a=d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.template=JST["layouts/top"],d}(Backbone.Marionette.Layout)}).call(myapp)}.call(this),function(){!function(){"use strict";return myapp.App.start(),Backbone.history.start()}()}.call(this);